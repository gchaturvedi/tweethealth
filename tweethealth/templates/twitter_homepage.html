{% extends "base.html" %}
{% block js %}
{{ block.super }}
<script type="text/javascript">
	$(document).ready(function() {
		$('#twitter-block').hide();
	        $.ajax({
		        type: "POST",
		        url: '/twitter/update-timeline/',
		        success:  function(data) {
					if(data['twitter_error']) {
						$('#tweet-score').hide();
						$('#latest-tweet').hide();
						$('#waiting-block').hide();
						$('#twitter-block').show();
						$('#tweet-button').hide();
						$('#twitter-block').text('Unable to fetch Twitter data.  Please try again later.');
					}
					else {
						$('#tweet-score').text(data['health_rating']);
						$('#latest-tweet').text(data['latest_tweet']);
						$('#waiting-block').hide();
						$('#twitter-block').show();
					}
		        },
		        error: function(data) {

		        }	
			});
	});
</script>
{% endblock %}
{% block navbar %}
<ul class="nav">
  <li class="active">
    <a href="#">Home</a>
  </li>
  <li><a href="#">Trends</a></li>
  <li><a href="#">About TweetHealth</a></li>
</ul>
{% endblock %}
{% block content %}
  <h1>Welcome @{{ twitter_username }}</h1>
  <p>Your score is based on a combination of analyzing your tweets and followers.</p>
	<div id="waiting-block" style="width:60%; margin-left:auto; margin-right:auto; margin-top:30px;" align="center">
	<img src="/media/img/spinner_waiting.gif" style="padding:20px;">
	<p> Loading Twitter Content..</p>
	</div>
	<div id="twitter-block" style="width:60%; margin-left:auto; margin-right:auto; margin-top:30px;" align="center">
		<div style="float:left;">
			<h3 style="">TweetHealth score</h3>
			<div style="width:150px;" align="center" class="alert alert-info">
				<p id="tweet-score">...</p>
			</div>
		</div>
		<div style="float:right;">
		<h3 style="">Twitter Statistics</h3>
		<p id="latest-tweet">...</p>		
		</div>
	</div>
	<div style="margin-top:20%;" align="center">
		<p>Your score indicates unhealthy habits! Hit the gym buddy!</p>
    <a style="margin-top:20px;" class="btn btn-primary btn-large">
		Tweet your TweetHealth rating!
    </a>
	</div>
</div>
{% endblock %}
